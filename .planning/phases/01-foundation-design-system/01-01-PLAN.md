---
phase: 01-foundation-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - pnpm-lock.yaml
  - tsconfig.json
  - next.config.ts
  - postcss.config.mjs
  - tailwind.config.ts
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/app/globals.css
  - .env.local
  - .env.example
  - .gitignore
  - vercel.json
autonomous: true

must_haves:
  truths:
    - "Visiting localhost:3000 shows a dark (#0a0a0a) page with visible text"
    - "Playfair Display renders for headlines with no flash of unstyled content"
    - "Inter renders for body text with no flash of unstyled content"
    - "Tailwind v4 dark theme tokens are defined and usable in components"
    - "Project builds and runs without errors"
  artifacts:
    - path: "src/app/layout.tsx"
      provides: "Root layout with font loading via next/font/google CSS variables"
      contains: "Playfair_Display"
    - path: "src/app/page.tsx"
      provides: "Home page with placeholder content demonstrating fonts and theme"
      min_lines: 15
    - path: "src/app/globals.css"
      provides: "Tailwind v4 directives + dark theme CSS custom properties via @theme"
      contains: "@theme"
    - path: "package.json"
      provides: "Next.js + Tailwind + Motion + Lenis dependencies"
      contains: "next"
    - path: ".env.example"
      provides: "Documented environment variables"
      contains: "CTA_MODE"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/app/globals.css"
      via: "CSS import for Tailwind directives and theme tokens"
      pattern: "import.*globals"
    - from: "src/app/layout.tsx"
      to: "next/font/google"
      via: "Font CSS variables applied to html element"
      pattern: "className.*font"
    - from: "src/app/globals.css"
      to: "Tailwind v4"
      via: "@theme directive defining color and font-family tokens"
      pattern: "@theme"
---

<objective>
Scaffold the Next.js project with Tailwind v4 dark theme, font loading, and all dependencies installed. This creates the deployable skeleton that every subsequent plan builds on.

Purpose: Establish the project foundation — without this, nothing else can be built.
Output: A running Next.js app at localhost:3000 showing a dark-themed page with correct fonts, ready for Vercel deployment.
</objective>

<execution_context>
@/Users/yuefunglee/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yuefunglee/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js project and install all Phase 1 dependencies</name>
  <files>
    package.json
    pnpm-lock.yaml
    tsconfig.json
    next.config.ts
    postcss.config.mjs
    .gitignore
    .env.local
    .env.example
  </files>
  <action>
    1. Initialize the Next.js project in the current directory (momentum-landing). Since the directory already exists with .git and .planning, scaffold directly here:
       ```
       pnpm create next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --yes
       ```
       If the scaffolder conflicts with existing files, use `--yes` to accept defaults or scaffold in a temp dir and move files.

    2. Install additional dependencies:
       ```
       pnpm add motion lenis
       ```

    3. Verify Tailwind v4 setup — the latest create-next-app should install Tailwind v4. If it installed v3 (check for tailwind.config.ts/js), migrate:
       - Remove tailwind.config.ts/js if present
       - Ensure postcss.config.mjs uses `@tailwindcss/postcss`
       - Ensure globals.css uses `@import "tailwindcss"` (not @tailwind directives)

    4. Create `.env.local` with:
       ```
       CTA_MODE=waitlist
       ```

    5. Create `.env.example` with:
       ```
       # CTA mode: "waitlist" (email capture) or "download" (App Store link)
       CTA_MODE=waitlist
       ```

    6. Ensure `.gitignore` includes `.env.local` (Next.js default should handle this).

    7. Verify the project builds: `pnpm build` should succeed.
  </action>
  <verify>
    - `pnpm build` completes without errors
    - `pnpm dev` starts and localhost:3000 loads
    - `package.json` contains "next", "motion", "lenis" dependencies
    - `postcss.config.mjs` references `@tailwindcss/postcss`
    - `.env.local` exists with CTA_MODE=waitlist
    - `.env.example` exists documenting the env var
  </verify>
  <done>Next.js project scaffolded with all dependencies, builds clean, dev server runs</done>
</task>

<task type="auto">
  <name>Task 2: Configure dark theme tokens, font loading, root layout, and placeholder page</name>
  <files>
    src/app/globals.css
    src/app/layout.tsx
    src/app/page.tsx
  </files>
  <action>
    1. **globals.css** — Replace the scaffolded content with Tailwind v4 dark theme:
       ```css
       @import "tailwindcss";

       @theme {
         --color-bg: #0a0a0a;
         --color-surface: #1a1a1a;
         --color-text: #f4f4f0;
         --color-text-muted: #a1a1a1;
         --color-border: rgba(244, 244, 240, 0.1);
         --color-cta: #ffffff;
         --color-cta-text: #0a0a0a;

         --font-display: var(--font-playfair);
         --font-body: var(--font-inter);

         --transition-cinematic: 700ms ease-out;
         --transition-smooth: 500ms ease-in-out;
       }

       html {
         background-color: var(--color-bg);
         color: var(--color-text);
         scroll-behavior: auto; /* Lenis handles smooth scroll */
       }

       body {
         font-family: var(--font-body);
         -webkit-font-smoothing: antialiased;
         -moz-osx-font-smoothing: grayscale;
       }

       /* WCAG AA contrast-checked opacity scale for text on dark backgrounds */
       /* #f4f4f0 on #0a0a0a = 17.4:1 (AAA) */
       /* #a1a1a1 on #0a0a0a = 7.5:1 (AA) */
       /* Do NOT use text lighter than #737373 on #0a0a0a (4.5:1 boundary) */
       ```

       NOTE: Tailwind v4 uses CSS @theme directive. Do NOT create a tailwind.config.ts file. The @theme block IS the configuration. Custom colors defined in @theme are automatically available as Tailwind utilities (e.g., `bg-bg`, `text-text`, `text-text-muted`).

    2. **layout.tsx** — Root layout with font loading:
       ```tsx
       import type { Metadata } from "next";
       import { Playfair_Display, Inter } from "next/font/google";
       import "./globals.css";

       const playfair = Playfair_Display({
         subsets: ["latin"],
         variable: "--font-playfair",
         display: "swap",
       });

       const inter = Inter({
         subsets: ["latin"],
         variable: "--font-inter",
         display: "swap",
       });

       export const metadata: Metadata = {
         title: "Momentum — The Anti-Subscription Habit Tracker",
         description: "A brutally honest, beautifully designed habit tracker that respects your wallet.",
       };

       export default function RootLayout({
         children,
       }: {
         children: React.ReactNode;
       }) {
         return (
           <html lang="en" className={`${playfair.variable} ${inter.variable}`}>
             <body>{children}</body>
           </html>
         );
       }
       ```

       Key points:
       - Use `display: "swap"` on both fonts for no FOUT
       - Apply font CSS variables to `<html>` via className
       - The CSS variables `--font-playfair` and `--font-inter` connect to Tailwind's `--font-display` and `--font-body` in globals.css
       - Do NOT add `antialiased` as a Tailwind class (it's handled in globals.css body rule)

    3. **page.tsx** — Placeholder page demonstrating fonts and theme:
       Create a Server Component home page with:
       - A full-height (min-h-dvh) dark section
       - A large Playfair Display headline: "Momentum" (using font-display class)
       - A subtitle in Inter: "The Anti-Subscription Habit Tracker" (using font-body class)
       - A paragraph of muted body text demonstrating the muted color
       - A placeholder white button (solid white bg, dark text, sharp corners/no border-radius, px-8 py-4) labeled "Get Early Access"
       - A subtle horizontal divider line using the border color token
       - Centered layout, generous vertical spacing
       - This page exists to visually verify the theme, fonts, and color tokens are working correctly — it will be replaced in Phase 2

    4. Verify fonts render correctly:
       - Run `pnpm dev` and check localhost:3000
       - Headline should render in Playfair Display (serif)
       - Body text should render in Inter (sans-serif)
       - No flash of system fonts on reload

    5. Verify theme tokens:
       - Background should be near-black (#0a0a0a)
       - Headline text should be off-white (#f4f4f0)
       - Muted text should be gray (#a1a1a1)
       - Button should be solid white with dark text
  </action>
  <verify>
    - `pnpm dev` shows the dark-themed page at localhost:3000
    - Browser DevTools confirms `font-family` on headline includes "Playfair Display"
    - Browser DevTools confirms `font-family` on body includes "Inter"
    - Background color is #0a0a0a (confirmed via DevTools)
    - No console errors or warnings
    - `pnpm build` still succeeds after changes
  </verify>
  <done>Dark theme page renders with Playfair Display headlines, Inter body text, correct color tokens, no FOUT, and builds clean</done>
</task>

</tasks>

<verification>
- `pnpm build` succeeds with zero errors
- `pnpm dev` serves a dark-themed page at localhost:3000
- Playfair Display is visible on headlines (check DevTools computed font-family)
- Inter is visible on body text (check DevTools computed font-family)
- Background is #0a0a0a, text is #f4f4f0, muted text is #a1a1a1
- .env.local contains CTA_MODE=waitlist
- No tailwind.config.ts file exists (Tailwind v4 uses CSS @theme)
</verification>

<success_criteria>
- Project scaffolded with Next.js App Router + Tailwind v4 + Motion + Lenis
- Dark theme tokens defined in globals.css @theme block
- Fonts loaded via next/font/google with CSS variables
- Placeholder page renders correctly with all theme elements visible
- Project builds and serves without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-01-SUMMARY.md`
</output>
