---
phase: 02-hero-conversion
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified:
  - src/components/nav.tsx
  - src/components/footer.tsx
  - src/components/waitlist-counter.tsx
  - src/app/page.tsx
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Sticky nav bar is fixed at top: logo mark on left, 'Get Early Access' CTA button on right"
    - "Nav starts minimal during hero (logo only, no CTA), full nav with CTA fades/slides in once user scrolls past the fold"
    - "Nav has solid dark background (#0a0a0a) when fully visible — no blur, no transparency"
    - "Nav CTA button scrolls to the hero email form (id='hero'), NOT a standalone form"
    - "Footer shows: small logo, Privacy Policy link, Terms of Service link, contact email, social links (Twitter/X, Instagram), and 'Momentum (c) 2026' copyright"
    - "Bottom CTA section shows the email form (CtaBlock compact variant) with a short 'Ready?' line above it"
    - "Bottom CTA matches hero CTA behavior — email form in waitlist mode, App Store button in download mode"
    - "Waitlist counter appears next to email input and is only displayed when count exceeds 25"
  artifacts:
    - path: "src/components/nav.tsx"
      provides: "Sticky navigation bar with scroll-aware logo + CTA visibility"
      contains: "use client"
    - path: "src/components/footer.tsx"
      provides: "Page footer with links, social icons, copyright"
    - path: "src/components/waitlist-counter.tsx"
      provides: "Displays waitlist signup count (fetched from /api/waitlist GET)"
      contains: "use client"
    - path: "src/app/page.tsx"
      provides: "Complete landing page with hero, bottom CTA, and footer sections"
    - path: "src/app/layout.tsx"
      provides: "Root layout updated with Nav component"
  key_links:
    - from: "src/components/nav.tsx"
      to: "#hero"
      via: "CTA button scrolls to hero section via anchor or scrollIntoView"
      pattern: "hero"
    - from: "src/components/waitlist-counter.tsx"
      to: "/api/waitlist"
      via: "Fetches subscriber count via GET request"
      pattern: "fetch.*api/waitlist"
    - from: "src/app/page.tsx"
      to: "src/components/ui/cta-block.tsx"
      via: "Bottom CTA section reuses CtaBlock component with compact prop"
      pattern: "CtaBlock.*compact"
    - from: "src/app/layout.tsx"
      to: "src/components/nav.tsx"
      via: "Nav rendered in layout so it persists across all pages"
      pattern: "import.*Nav"
---

<objective>
Build the sticky navigation bar, footer, bottom CTA repeat, and waitlist counter to complete the conversion-focused landing page.

Purpose: The nav provides persistent access to the CTA while scrolling. The bottom CTA is the closing nudge for visitors who scrolled through. The footer establishes legitimacy with links and social presence. The waitlist counter adds social proof once traction builds.
Output: A complete single-page landing experience — hero (from 02-01), sticky nav, footer, bottom CTA with "Ready?" prompt, and conditional waitlist counter.
</objective>

<execution_context>
@/Users/yuefunglee/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yuefunglee/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-hero-conversion/02-CONTEXT.md
@.planning/phases/02-hero-conversion/02-01-SUMMARY.md
@.planning/phases/02-hero-conversion/02-02-SUMMARY.md
@src/app/page.tsx
@src/app/layout.tsx
@src/components/ui/cta-block.tsx
@src/components/ui/button.tsx
@src/components/ui/section.tsx
@src/components/ui/container.tsx
@src/components/ui/heading.tsx
@src/components/ui/text.tsx
@src/lib/config.ts
@src/lib/animations.ts
@src/lib/utils.ts
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build sticky Nav component with scroll-aware behavior</name>
  <files>
    src/components/nav.tsx
    src/app/layout.tsx
  </files>
  <action>
    Build the sticky navigation bar and integrate it into the root layout.

    **Nav component** (`src/components/nav.tsx`):
    - `"use client"` — needs scroll position tracking and Motion animations

    **Scroll-aware behavior (LOCKED decision from CONTEXT.md):**
    - During hero viewport: only the logo mark is visible, NO CTA button
    - Once user scrolls past the fold (hero section): full nav slides/fades in with CTA button
    - The threshold is approximately 1 viewport height (100vh) — Claude can fine-tune

    **Implementation:**
    1. Use `useEffect` + scroll event listener (or Lenis scroll callback if available) to track scroll position
    2. State: `scrolledPastHero` (boolean) — true when scrollY > window.innerHeight * 0.8 (or similar threshold)
    3. The nav is always `fixed top-0 left-0 right-0 z-50`
    4. Background: transparent during hero, then `bg-bg` (#0a0a0a) solid once scrolledPastHero — NO blur, NO transparency (LOCKED)

    **Layout:**
    - Horizontal flex: logo on left, CTA button on right
    - Padding: `px-6 md:px-8 lg:px-12 py-4` — matches Section horizontal padding
    - Max inner width consistent with the page container

    **Logo mark:**
    - Left side: the Momentum logo mark (geometric icon from the app project)
    - CONTEXT.md says: "Logo mark exists in the Momentum app project and should be imported/adapted for web use"
    - If the logo SVG is not available in this repo, create a simple geometric placeholder that can be swapped later — a clean minimal "M" monogram or a small geometric shape (circle with crosshair, etc.)
    - The logo should be an inline SVG component for best performance
    - Size: ~32px, white (#f4f4f0) on dark background
    - Always visible (both during hero and after scroll)

    **CTA button (right side):**
    - Only visible when `scrolledPastHero` is true
    - Text: "Get Early Access" (waitlist mode) or "Download" (download mode)
    - Use the Button component with a compact styling override (smaller padding: px-5 py-2.5, text-sm)
    - Clicking it scrolls smoothly to `#hero` section (use `document.getElementById('hero')?.scrollIntoView({ behavior: 'smooth' })` or similar)
    - In download mode, the button links directly to App Store URL instead of scrolling
    - Animate in/out with Motion: fade + slight translateY

    **Transition animation:**
    - Nav background transition: use CSS `transition-all duration-500` or Motion
    - CTA button appearance: Motion `AnimatePresence` with fadeUp variant
    - Keep it smooth and cinematic — matches the 500-700ms transition language

    **Update layout.tsx:**
    - Import Nav component
    - Render `<Nav />` inside the body, ABOVE the `{children}` and LenisProvider content
    - Nav must be OUTSIDE any scroll container so it stays fixed
    - Keep the existing LenisProvider wrapping children

    **Important edge cases:**
    - Nav should not interfere with hero content — ensure hero section has enough top padding or the nav is transparent enough on hero that content isn't hidden behind it
    - On mobile: same behavior, but CTA button text might be shorter ("Join" instead of "Get Early Access") — Claude's discretion
    - Read `isWaitlistMode` from config to determine CTA text and behavior
  </action>
  <verify>
    - Nav is fixed at top of viewport (position: fixed, z-50)
    - Logo visible at all scroll positions
    - CTA button hidden during hero, visible after scrolling past fold
    - CTA button scrolls to #hero section on click (waitlist mode)
    - CTA button links to App Store (download mode)
    - Background transitions from transparent to solid #0a0a0a
    - No blur or transparency when solid — clean dark background
    - Nav rendered in layout.tsx above page content
    - `pnpm build` succeeds
    - Nav works at mobile, tablet, desktop breakpoints
  </verify>
  <done>Sticky nav with scroll-aware logo + CTA, integrated into root layout</done>
</task>

<task type="auto">
  <name>Task 2: Build footer, bottom CTA section, waitlist counter, and assemble complete page</name>
  <files>
    src/components/footer.tsx
    src/components/waitlist-counter.tsx
    src/app/page.tsx
  </files>
  <action>
    Build the footer component, waitlist counter, bottom CTA section, and assemble the complete landing page.

    **1. Waitlist counter** (`src/components/waitlist-counter.tsx`):
    - `"use client"` — fetches data from API and manages state
    - Fetches subscriber count from `GET /api/waitlist` on mount
    - Only displays when count > 25 (LOCKED requirement HERO-06)
    - Display format: "[count] people joined" or similar — small, muted, understated
    - Uses Text variant="small" styling
    - If fetch fails or count <= 25, renders nothing (null)
    - Props: `className?` for positioning
    - Use `useEffect` + `fetch` (no need for SWR/React Query for a single fetch)
    - Subtle fade-in animation when displayed (Motion)

    **2. Footer component** (`src/components/footer.tsx`):
    - Can be a Server Component (no interactivity needed)

    **Layout (LOCKED from CONTEXT.md):**
    - Light but structured: small logo, column of links, copyright line
    - Two to three rows max
    - Full-width with Container for max-width constraint

    **Content:**
    - Small Momentum logo (same as nav, but smaller ~20px)
    - Links row: Privacy Policy (href="#"), Terms of Service (href="#"), contact email (mailto:hello@momentum-app.com or similar placeholder)
    - Social links: Twitter/X icon, Instagram icon — link to placeholder URLs (# or empty profiles)
    - Social icons: simple inline SVGs (X logo, Instagram logo) — small, muted color, hover brightens
    - Copyright: "Momentum &copy; 2026" — nothing more (LOCKED)

    **Styling:**
    - Subtle top border (`border-t border-border`) to separate from content
    - Muted text colors throughout
    - Generous padding (py-12 or similar)
    - Links: text-text-muted, hover:text-text transition

    **3. Bottom CTA section — add to page.tsx:**

    Add a bottom CTA section to page.tsx between the hero and the footer:

    ```
    {/* Bottom CTA — minimal closing nudge */}
    <Section id="bottom-cta" fullHeight={false} className="py-32">
      <Container size="narrow">
        <ScrollReveal className="flex flex-col items-center gap-8 text-center">
          <Heading as="h3">Ready?</Heading>
          <CtaBlock compact />
          <WaitlistCounter />
        </ScrollReveal>
      </Container>
    </Section>
    ```

    **Bottom CTA design (LOCKED from CONTEXT.md):**
    - Minimal nudge — "Ready?" heading, then the email form (compact variant), then waitlist counter
    - No headline repeat, understated closing — the page already did the selling
    - Uses CtaBlock with `compact` prop for tighter spacing
    - WaitlistCounter appears below the CTA (only renders if count > 25)

    **4. Assemble complete page.tsx:**

    Final page structure:
    ```
    <main>
      {/* Hero section (from 02-01) — already in page.tsx */}

      {/* Bottom CTA section */}

      {/* Footer */}
    </main>
    ```

    - Wrap everything in a `<main>` element for semantics
    - Keep hero section exactly as built in 02-01
    - Add bottom CTA section after hero
    - Add Footer component at the end
    - Page remains a Server Component — it composes client components

    **Important:**
    - The page currently only has the hero section (from 02-01). Add bottom CTA and footer below it.
    - DO NOT modify the hero section — it was built and verified in 02-01
    - The footer is rendered inside page.tsx (not layout.tsx) since it's page-specific content
    - The nav IS in layout.tsx (from Task 1) since it persists across potential future pages
  </action>
  <verify>
    - Footer renders with logo, Privacy Policy link, Terms of Service link, contact email, social icons, copyright
    - All footer links are present (even if placeholder # hrefs)
    - Copyright reads "Momentum (c) 2026"
    - Bottom CTA section shows "Ready?" heading with CtaBlock (compact)
    - Bottom CTA email form works (submits to /api/waitlist, same as hero)
    - In download mode, bottom CTA shows App Store button
    - WaitlistCounter fetches from GET /api/waitlist
    - WaitlistCounter renders nothing when count <= 25
    - WaitlistCounter shows count when > 25
    - Page structure: hero → bottom CTA → footer
    - `pnpm build` succeeds
    - `pnpm dev` shows complete landing page with all sections
    - Nav, hero, bottom CTA, and footer all render correctly at 375px, 768px, 1440px
  </verify>
  <done>Footer with links and social icons, bottom CTA with "Ready?" nudge, waitlist counter with 25+ threshold, complete assembled landing page</done>
</task>

</tasks>

<verification>
Complete Phase 2 verification — ALL success criteria must pass:

1. **HERO-01** ✓ (from 02-01): "The Anti-Subscription Habit Tracker" headline above the fold within 2 seconds
2. **HERO-02** ✓ (02-01 + 02-02): User can type email, submit, receive branded welcome email via Resend with rate limiting
3. **HERO-03** ✓ (from 02-01): Download mode shows App Store button
4. **NAV-01** ✓: Sticky nav bar with logo left, CTA right, visible while scrolling
5. **NAV-02** ✓: Footer with Privacy Policy, Terms of Service, contact email
6. **HERO-05** ✓: Bottom CTA matches hero CTA behavior (email or download depending on state)
7. **HERO-06** ✓: Waitlist counter next to email input, displayed only when count > 25
8. **HERO-07** ✓ (from 02-02): Welcome email with Momentum branding
9. **INFRA-02** ✓ (from 02-02): Resend API route with validation and rate limiting

**End-to-end test:**
1. Visit page → see hero with headline, subhead, email form
2. Enter email, submit → form shows "You're in. Check your inbox."
3. Check email → branded dark welcome email received
4. Scroll down → nav CTA appears, click it → scrolls back to hero
5. Continue scrolling → bottom CTA "Ready?" section with email form
6. Footer with links and copyright visible at bottom
7. Toggle NEXT_PUBLIC_CTA_MODE=download → hero and bottom CTA show App Store buttons, nav CTA links to App Store

**Responsive check:** All of the above at 375px, 768px, 1440px
</verification>

<success_criteria>
- Sticky nav with scroll-aware behavior: logo always visible, CTA appears after hero
- Nav CTA scrolls to hero section (waitlist) or links to App Store (download)
- Footer with Privacy Policy, Terms of Service, contact email, social links, copyright
- Bottom CTA section with "Ready?" heading and compact CtaBlock
- Waitlist counter fetches from API and only shows when count > 25
- Complete landing page assembled: hero → bottom CTA → footer
- All components responsive at 375px, 768px, 1440px
- `pnpm build` succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/02-hero-conversion/02-03-SUMMARY.md`
</output>
