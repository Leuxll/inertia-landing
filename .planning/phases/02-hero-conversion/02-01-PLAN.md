---
phase: 02-hero-conversion
plan: 01
type: execute
wave: 1
depends_on: ["01-03"]
files_modified:
  - src/components/ui/cta-block.tsx
  - src/components/ui/geometric-accent.tsx
  - src/app/page.tsx
  - src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Hero section fills the viewport with headline 'The Anti-Subscription Habit Tracker' centered above the fold"
    - "Layered headline hierarchy: uppercase label, large Playfair Display headline, Inter subhead — generous negative space between each"
    - "Subtle geometric accent element animates in the hero background without competing with text"
    - "CtaBlock is an interactive client component with real form state: email input, validation, submit handler, loading state, and inline success confirmation"
    - "Stacked form layout: email input on its own line, full-width 'Get Early Access' button below it"
    - "On successful submission the form fades inline to a confirmation message — no page navigation, no toast"
    - "In download mode, CtaBlock shows an App Store download button"
    - "page.tsx is replaced — no more design system demo, now a real landing page starting with the hero"
  artifacts:
    - path: "src/components/ui/cta-block.tsx"
      provides: "Interactive two-state CTA with email form (waitlist) or App Store button (download)"
      contains: "use client"
    - path: "src/components/ui/geometric-accent.tsx"
      provides: "Animated geometric background element for hero section"
      contains: "use client"
    - path: "src/app/page.tsx"
      provides: "Real landing page with hero section (replaces design system demo)"
  key_links:
    - from: "src/components/ui/cta-block.tsx"
      to: "src/lib/config.ts"
      via: "Reads ctaMode/isWaitlistMode to switch between email form and download button"
      pattern: "import.*config"
    - from: "src/components/ui/cta-block.tsx"
      to: "/api/waitlist"
      via: "Form submits email to API route via fetch POST"
      pattern: "fetch.*api/waitlist"
    - from: "src/app/page.tsx"
      to: "src/components/ui/cta-block.tsx"
      via: "Hero section renders CtaBlock for email capture"
      pattern: "import.*CtaBlock"
---

<objective>
Build the hero section and upgrade CtaBlock from a disabled placeholder to a fully interactive email capture component. Replace the design system demo page with a real landing page.

Purpose: This is the conversion core — the first thing visitors see. The hero must communicate Momentum's positioning instantly and provide a frictionless path to signup. The interactive CtaBlock is the foundation that both the hero CTA and the bottom CTA (02-03) will reuse.
Output: A full-viewport hero section with layered headline hierarchy, geometric accent, and working email form that submits to `/api/waitlist` (API route built in 02-02). Download mode shows App Store button.
</objective>

<execution_context>
@/Users/yuefunglee/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yuefunglee/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-hero-conversion/02-CONTEXT.md
@.planning/phases/01-foundation-design-system/01-03-SUMMARY.md
@src/components/ui/cta-block.tsx
@src/components/ui/button.tsx
@src/components/ui/section.tsx
@src/components/ui/container.tsx
@src/components/ui/heading.tsx
@src/components/ui/text.tsx
@src/components/ui/scroll-reveal.tsx
@src/lib/config.ts
@src/lib/animations.ts
@src/lib/utils.ts
@src/app/globals.css
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade CtaBlock to interactive email capture component</name>
  <files>
    src/components/ui/cta-block.tsx
  </files>
  <action>
    Rewrite CtaBlock from a Server Component placeholder into a fully interactive Client Component with real form behavior.

    **Critical change:** Add `"use client"` directive — this component now manages form state, handles submission, and animates between states.

    **Waitlist mode — interactive email form:**

    1. **Form state management** — Use React useState for:
       - `email` (string) — controlled input value
       - `status` ("idle" | "loading" | "success" | "error") — form submission state
       - `errorMessage` (string) — validation/server error message

    2. **Stacked layout** (LOCKED decision from CONTEXT.md):
       - Email input on its own line, full-width within a max-w-md container
       - "Get Early Access" submit button below the input, also full-width
       - NOT side-by-side — stacked vertically in both mobile and desktop
       - Center-aligned within the parent

    3. **Email input styling:**
       - Dark surface background (`bg-surface`), white text (`text-text`), border (`border border-border`)
       - Sharp corners (rounded-none) — NO border-radius, consistent with design system
       - Same height/padding as Button component (`px-4 py-4`)
       - `font-body text-base` — matches existing design tokens
       - Placeholder text: "you@example.com" (or similar — Claude's discretion)
       - Focus state: `focus:border-text/30 focus:outline-none` — subtle brightening, no blue outline

    4. **Client-side validation:**
       - Basic email format validation before submission (regex or input type="email" + manual check)
       - If invalid, set `status` to "error" and show message below the form
       - Error message uses Text variant="small" with a slightly warmer/brighter color for visibility

    5. **Form submission:**
       - On submit, set `status` to "loading", disable input and button
       - POST to `/api/waitlist` with JSON body `{ email }`
       - Button text changes to "Joining..." or similar during loading
       - On success (200): set `status` to "success"
       - On error (400/429/500): set `status` to "error", parse error message from response body

    6. **Success state — inline transformation** (LOCKED decision):
       - When `status === "success"`, the entire form fades out and is replaced by a confirmation message
       - Use Motion `AnimatePresence` with `mode="wait"` for the crossfade
       - Confirmation message: "You're in. Check your inbox." — styled with Heading as="h4" or Text, centered
       - NO page navigation, NO toast notification — the confirmation IS the form area now

    7. **Error state:**
       - Show error message below the button in Text variant="small"
       - Form remains interactive so user can fix and retry

    **Download mode:**
    - Render a Button with `href` pointing to the App Store (keep placeholder URL `https://apps.apple.com` for now)
    - Button text: "Download on App Store"
    - No email form, no state management needed

    **Props interface:**
    - Keep `className?` for external layout control
    - Add `compact?` (boolean, default false) — when true, renders a more compact version for the bottom CTA (smaller text, tighter spacing). 02-03 will use this.

    **Remove the development mode indicator** — delete the "Currently in {ctaMode} mode" Text that was a Phase 1 debug element.

    **Import strategy:**
    - Import `isWaitlistMode` from `@/lib/config` — this is a build-time constant, safe to use in client components since it reads NEXT_PUBLIC_ env var
    - Import `Button` from `@/components/ui/button`
    - Import `Text` from `@/components/ui/text`
    - Import `motion`, `AnimatePresence` from `motion/react`
    - Import `cn` from `@/lib/utils`
    - Import `smoothTransition` from `@/lib/animations` for form state transitions
  </action>
  <verify>
    - File has "use client" directive
    - Component manages email, status, errorMessage state
    - Form submits POST to /api/waitlist with JSON body
    - Loading state disables form and changes button text
    - Success state replaces form with confirmation using AnimatePresence
    - Error state shows message below form, allows retry
    - Download mode renders App Store button link
    - No "Currently in {ctaMode} mode" debug text
    - Input has sharp corners (rounded-none), dark surface bg, correct font
    - Stacked layout: input full-width, button full-width below it
    - `pnpm build` succeeds (note: /api/waitlist doesn't exist yet — the fetch call will fail at runtime but the build should succeed since it's a runtime POST)
  </verify>
  <done>CtaBlock is a fully interactive client component with email capture, validation, submission, inline success confirmation, and download mode fallback</done>
</task>

<task type="auto">
  <name>Task 2: Build hero section with geometric accent and replace page.tsx</name>
  <files>
    src/components/ui/geometric-accent.tsx
    src/app/page.tsx
    src/app/globals.css
  </files>
  <action>
    Create the geometric accent component and rebuild page.tsx as the real Momentum landing page hero.

    **1. Geometric accent element** (`src/components/ui/geometric-accent.tsx`):
    - `"use client"` — uses Motion for animation
    - A subtle decorative element positioned absolutely behind the hero text
    - Claude's discretion on exact shape (CONTEXT.md says: thin circle, line, or rotating shape — whatever looks best)
    - Suggested: a large thin-bordered circle (or partial arc) that slowly rotates, positioned center-screen behind the headline
    - Styling: `border border-text/5` or similar very low opacity — MUST NOT compete with text. This is ambient depth, not a feature.
    - Animation: slow continuous rotation or subtle pulse using Motion `animate` prop (not scroll-triggered)
    - Size: large (400-600px diameter) to create a cosmic/Co-Star feel
    - z-index below text content (`z-0`, text at `z-10`)
    - Props: `className?` for positioning override

    **2. Replace page.tsx** — This is the REAL landing page now, not a demo:

    The page structure for THIS plan is just the hero section. 02-03 will add nav, footer, and bottom CTA. Structure:

    ```
    <Section id="hero" fullHeight className="justify-center relative overflow-hidden">
      <GeometricAccent /> {/* Positioned absolute, behind content */}
      <Container size="narrow" className="relative z-10">
        <ScrollReveal className="flex flex-col items-center gap-8 text-center">
          {/* Uppercase label */}
          <Text variant="small" className="uppercase tracking-[0.3em]">
            Momentum
          </Text>

          {/* Main headline — Playfair Display, maximum impact */}
          <Heading as="h1">
            The Anti-Subscription{'\n'}Habit Tracker
          </Heading>

          {/* Subhead — Inter, muted, philosophical */}
          <Text variant="muted" className="max-w-lg text-lg md:text-xl">
            [1-2 sentence subhead — Claude's discretion on exact copy.
             Should capture the essence: beautifully designed, brutally honest,
             respects your wallet. Use brand voice.]
          </Text>

          {/* CTA */}
          <CtaBlock />
        </ScrollReveal>
      </Container>
    </Section>
    ```

    **Locked design decisions to honor:**
    - Full-screen centered composition — hero fills viewport, content dead center
    - Layered headline hierarchy: small uppercase label → large headline → subhead → CTA
    - Generous negative space between elements (gap-8 or larger between sections, gap-6 within)
    - Container size="narrow" to keep text column tight and editorial
    - `overflow-hidden` on Section to contain the geometric accent

    **Subhead copy direction:**
    - 1-2 sentences in Inter, muted color
    - Captures: "beautifully designed", "brutally honest", "respects your wallet"
    - Tone: philosophical, confident, Co-Star-inspired
    - Can draw from app taglines: "Stop Guessing. Start Tracking.", "Growth Is Always Built On Structure."
    - Claude writes the actual copy — no placeholder lorem ipsum

    **3. globals.css — add any needed tokens:**
    - If the geometric accent needs a custom animation (e.g., slow rotation keyframe), add it
    - Only add what's necessary — don't bloat the token file

    **Important:**
    - page.tsx MUST remain a Server Component (no "use client") — it composes client components (CtaBlock, ScrollReveal, GeometricAccent)
    - The design system demo content is DELETED — this is the real landing page now
    - The hero Section needs `id="hero"` so the nav CTA (02-03) can scroll to it
    - Leave space for nav/footer/bottom CTA — 02-03 will add those around the hero
  </action>
  <verify>
    - page.tsx is a Server Component (no "use client")
    - Hero section fills viewport (min-h-dvh via Section fullHeight)
    - Uppercase "MOMENTUM" label at top of hero
    - "The Anti-Subscription Habit Tracker" headline in Playfair Display
    - Compelling subhead in Inter (real copy, not placeholder)
    - CtaBlock renders below the subhead
    - Geometric accent animates subtly behind hero content
    - Accent doesn't compete with text (very low opacity border)
    - Content is centered with generous negative space
    - Section has id="hero" for scroll targeting
    - `pnpm build` succeeds with no type errors
    - Page renders correctly at 375px, 768px, and 1440px
  </verify>
  <done>Hero section built with layered headline hierarchy, geometric accent, and real copy. page.tsx is the actual Momentum landing page.</done>
</task>

</tasks>

<verification>
Verify against Phase 2 success criteria (partial — this plan covers criteria 1 and 3, plus foundation for 2 and 5):

1. **HERO-01**: "The Anti-Subscription Habit Tracker" headline visible above the fold within 2 seconds — visual check
2. **HERO-02** (partial): Email form is interactive and submits to /api/waitlist — form works, API not built yet (02-02)
3. **HERO-03**: Download mode shows App Store button — toggle NEXT_PUBLIC_CTA_MODE=download and verify
4. **Form UX**: Stacked layout, inline success state, error handling — verify all form states

Build check:
- `pnpm build` succeeds
- `pnpm dev` shows the hero section correctly
- No TypeScript errors
- No design system demo content remaining
</verification>

<success_criteria>
- Hero section displays above the fold with layered headline hierarchy (label → headline → subhead → CTA)
- CtaBlock is an interactive client component with email validation, submission to /api/waitlist, loading state, and inline success confirmation
- Download mode shows App Store button
- Geometric accent animates subtly in the background
- Page is a real landing page (design system demo removed)
- Generous negative space and centered composition match the luxury brand aesthetic
- `pnpm build` succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/02-hero-conversion/02-01-SUMMARY.md`
</output>
